<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../css/hakyll-cssgarden/bronx.css">
    <link rel="stylesheet" href="../css/syntax.css">
    <link rel="stylesheet" href="../css/custom.css">
    <title>My Hakyll Blog - goenvを用いたGo環境のセットアップ</title>
  </head>
  <body>
    <div id="header">
      <div id="logo">
        <a href="../">Nobiruwa's</a>
      </div>
      <div id="navigation">
        <a href="../">Home</a>
        <a href="../archive.html">Archive</a>
      </div>
    </div>

    <div id="content">
      <h1>goenvを用いたGo環境のセットアップ</h1>

      <div class="info">
    Posted on July  1, 2023
    
        by nobiruwa
    
</div>

<h2 id="tldr">tl;dr</h2>
<pre class="console"><code>$ git clone https://github.com/syndbg/goenv.git $HOME/.goenv
$ cat &lt;&lt; EOF &gt;&gt; ~/.profile
GOENV_HOME=&quot;$HOME/.goenv&quot;
GOENV_BIN=&quot;$GOENV_HOME/bin&quot;
if [ -d &quot;$GOENV_BIN&quot; ]; then
    export PATH=&quot;$GOENV_BIN:$PATH&quot;
    eval &quot;$(goenv init --no-rehash -)&quot;
    (goenv rehash &amp;) 2&gt; /dev/null
fi
EOF</code></pre>
<h2 id="動機">動機</h2>
<p><a href="https://github.com/ory/hydra">ory/hydra</a>を試すためにGo言語の環境が必要でした。Goを<a href="https://github.com/syndbg/goenv">goenv/goenv</a>によって管理したいと思いました。</p>
<h2 id="セットアップ">セットアップ</h2>
<h3 id="goenvのチェックアウト">goenvのチェックアウト</h3>
<p><code>goenv</code>リポジトリをチェックアウトします。</p>
<p>場所は公式に合わせて<code>~/.goenv</code>とします。</p>
<pre class="console"><code>$ git clone https://github.com/syndbg/goenv.git $HOME/.goenv</code></pre>
<h3 id="profileの記述"><code>~/.profile</code>の記述</h3>
<p><code>~/.profile</code>にて、環境変数<code>PATH</code>を設定します。</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="va">GOENV_HOME</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$HOME</span><span class="st">/.goenv&quot;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="va">GOENV_BIN</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$GOENV_HOME</span><span class="st">/bin&quot;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">[</span> <span class="ot">-d</span> <span class="st">&quot;</span><span class="va">$GOENV_BIN</span><span class="st">&quot;</span> <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$GOENV_BIN</span><span class="st">:</span><span class="va">$PATH</span><span class="st">&quot;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">eval</span> <span class="st">&quot;</span><span class="va">$(</span><span class="ex">goenv</span> init <span class="at">--no-rehash</span> <span class="at">-</span><span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">(</span><span class="ex">goenv</span> rehash <span class="kw">&amp;)</span> <span class="dv">2</span><span class="op">&gt;</span> /dev/null</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span></code></pre></div>
<h2 id="goのインストール">Goのインストール</h2>
<p><code>goenv install</code>コマンドで<code>~/.goenv/versions</code>配下に特定のバージョンのGoをインストールします。</p>
<pre class="console"><code># インストール可能なバージョンを列挙する
$ goenv install --list
# 1.20.5をインストールする場合
$ goenv install 1.20.5</code></pre>
<p>登録されたGoは下記のコマンドで確認できます。</p>
<pre class="console"><code>$ goenv versions</code></pre>
<h2 id="グローバルのgo環境">グローバルのGo環境</h2>
<p>グローバルのGo環境を指定します。</p>
<pre class="console"><code>$ goenv global &lt;goenv versionsで列挙されるバージョン文字列&gt;</code></pre>
<h2 id="ローカルのgo環境">ローカルのGo環境</h2>
<p>ローカルのGo環境を設定するには、以下のコマンドを実行します。</p>
<pre class="console"><code>$ cd &lt;設定したいディレクトリ&gt;
$ goenv local &lt;goenv versionsで列挙されるバージョン文字列&gt;</code></pre>
<p><code>goenv local</code>を実行したディレクトリには<code>.go-version</code>ファイルが生成されます。</p>
<p><code>goenv local</code>を実行したディレクトリとその子孫ディレクトリで実行する<code>go</code>/<code>gofmt</code>コマンド等は、<code>.go-version</code>で指定されたGo環境のものが使用されます。</p>

    </div>
    <div id="footer">
      Site proudly generated by
      <a href="http://jaspervdj.be/hakyll">Hakyll</a>
    </div>
  </body>
</html>
